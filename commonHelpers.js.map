{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '44810429-780319b334a9c60538a2ecf11';\n\nexport async function fetchImages(query, page = 1) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n    const response = await axios.get(url);\n    if (response.status !== 200) {\n        throw new Error('Failed to fetch images');\n    }\n    return response.data;\n}","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images, append = false) {\n    const gallery = document.querySelector('.gallery');\n    const html = images.map(image => createImageCard(image)).join('');\n    if (append) {\n        gallery.insertAdjacentHTML('beforeend', html);\n    } else {\n        gallery.innerHTML = html;\n    }\n    if (lightbox) {\n        lightbox.refresh();\n    } else {\n        lightbox = new SimpleLightbox('.gallery a');\n    }\n    smoothScroll();\n}\n\nfunction createImageCard(image) {\n    return `\n        <div class=\"photo-card\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n                <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n                <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n            </div>\n        </div>\n    `;\n}\n\nexport function showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n    });\n}\n\nexport function showLoading() {\n    document.querySelector('.loading').style.display = 'block';\n}\n\nexport function hideLoading() {\n    document.querySelector('.loading').style.display = 'none';\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}","\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, showError, showLoading, hideLoading, clearGallery } from './js/render-functions.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const form = document.getElementById('search-form');\n    const input = form.querySelector('input[name=\"query\"]');\n    const loadMoreButton = document.querySelector('.load-more');\n    let query = '';\n    let page = 1;\n\n    form.addEventListener('submit', async (event) => {\n        event.preventDefault();\n        query = input.value.trim();\n        page = 1;\n        if (query === '') {\n            showError('Please enter a search query');\n            input.value = '';\n            return;\n        }\n        try {\n            showLoading();\n            const data = await fetchImages(query, page);\n            hideLoading();\n            clearGallery();\n            if (data.hits.length === 0) {\n                showError('Sorry, there are no images matching your search query. Please try again!');\n            } else {\n                renderGallery(data.hits);\n                input.value = '';\n                if (data.totalHits > 15) {\n                    loadMoreButton.style.display = 'block';\n                } else {\n                    loadMoreButton.style.display = 'none';\n                }\n            }\n        } catch (error) {\n            hideLoading();\n            clearGallery();\n            showError('Failed to fetch images. Please try again later.');\n        }\n    });\n\n    loadMoreButton.addEventListener('click', async () => {\n        page += 1;\n        try {\n            showLoading();\n            const data = await fetchImages(query, page);\n            hideLoading();\n            if (data.hits.length === 0 || data.hits.length < 15) {\n                loadMoreButton.style.display = 'none';\n                showError(\"We're sorry, but you've reached the end of search results.\");\n            }\n            renderGallery(data.hits, true);\n        } catch (error) {\n            hideLoading();\n            showError('Failed to fetch images. Please try again later.');\n        }\n    });\n});"],"names":["BASE_URL","API_KEY","fetchImages","query","page","url","response","axios","lightbox","renderGallery","images","append","gallery","html","image","createImageCard","SimpleLightbox","smoothScroll","showError","message","iziToast","showLoading","hideLoading","clearGallery","cardHeight","form","input","loadMoreButton","event","data"],"mappings":"owBAGA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAC/C,MAAMC,EAAM,GAAGL,CAAQ,QAAQC,CAAO,MAAM,mBAAmBE,CAAK,CAAC,6EAA6EC,CAAI,GAChJE,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,SAAW,IACpB,MAAM,IAAI,MAAM,wBAAwB,EAE5C,OAAOA,EAAS,IACpB,CCPA,IAAIE,EAEG,SAASC,EAAcC,EAAQC,EAAS,GAAO,CAClD,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAOH,EAAO,IAAII,GAASC,EAAgBD,CAAK,CAAC,EAAE,KAAK,EAAE,EAC5DH,EACAC,EAAQ,mBAAmB,YAAaC,CAAI,EAE5CD,EAAQ,UAAYC,EAEpBL,EACAA,EAAS,QAAO,EAEhBA,EAAW,IAAIQ,EAAe,YAAY,EAE9CC,GACJ,CAEA,SAASF,EAAgBD,EAAO,CAC5B,MAAO;AAAA;AAAA,uBAEYA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,qDAGbA,EAAM,KAAK;AAAA,qDACXA,EAAM,KAAK;AAAA,wDACRA,EAAM,QAAQ;AAAA,yDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIxE,CAEO,SAASI,EAAUC,EAAS,CAC/BC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,CACjB,CAAK,CACL,CAEO,SAASE,GAAc,CAC1B,SAAS,cAAc,UAAU,EAAE,MAAM,QAAU,OACvD,CAEO,SAASC,GAAc,CAC1B,SAAS,cAAc,UAAU,EAAE,MAAM,QAAU,MACvD,CAEO,SAASC,GAAe,CAC3B,MAAMX,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACxB,CAEA,SAASK,GAAe,CACpB,KAAM,CAAE,OAAQO,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACL,CC9DA,SAAS,iBAAiB,mBAAoB,IAAM,CAChD,MAAMC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAQD,EAAK,cAAc,qBAAqB,EAChDE,EAAiB,SAAS,cAAc,YAAY,EAC1D,IAAIxB,EAAQ,GACRC,EAAO,EAEXqB,EAAK,iBAAiB,SAAU,MAAOG,GAAU,CAI7C,GAHAA,EAAM,eAAc,EACpBzB,EAAQuB,EAAM,MAAM,OACpBtB,EAAO,EACHD,IAAU,GAAI,CACde,EAAU,6BAA6B,EACvCQ,EAAM,MAAQ,GACd,MACH,CACD,GAAI,CACAL,IACA,MAAMQ,EAAO,MAAM3B,EAAYC,EAAOC,CAAI,EAC1CkB,IACAC,IACIM,EAAK,KAAK,SAAW,EACrBX,EAAU,0EAA0E,GAEpFT,EAAcoB,EAAK,IAAI,EACvBH,EAAM,MAAQ,GACVG,EAAK,UAAY,GACjBF,EAAe,MAAM,QAAU,QAE/BA,EAAe,MAAM,QAAU,OAG1C,MAAe,CACZL,IACAC,IACAL,EAAU,iDAAiD,CAC9D,CACT,CAAK,EAEDS,EAAe,iBAAiB,QAAS,SAAY,CACjDvB,GAAQ,EACR,GAAI,CACAiB,IACA,MAAMQ,EAAO,MAAM3B,EAAYC,EAAOC,CAAI,EAC1CkB,KACIO,EAAK,KAAK,SAAW,GAAKA,EAAK,KAAK,OAAS,MAC7CF,EAAe,MAAM,QAAU,OAC/BT,EAAU,4DAA4D,GAE1ET,EAAcoB,EAAK,KAAM,EAAI,CAChC,MAAe,CACZP,IACAJ,EAAU,iDAAiD,CAC9D,CACT,CAAK,CACL,CAAC"}